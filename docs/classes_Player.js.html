<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: classes/Player.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: classes/Player.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { GameObject } from "./GameObject.js"
import { Sprite } from "./Sprite.js"

/**
 * The character that the user controls.
 * @extends GameObject
 */
export class Player extends GameObject {
  /** Is the player currently jumping?
   * @type {boolean}
   */
  #isJumping = false

  /** The width of the player, in pixels.
   * Changes based on player action. Eg. is larger when running
   * @type {number}
   */
  #width

  /** The height of the player, in pixels.
   * Changes based on player action.
   * @type {number}
   */
  #height

  /** The sprite to render when player is sitting still, facing right.
   * @type {Sprite}
   */
  #idleRightSprite

  /** The sprite to render when player is sitting still, facing left.
   * @type {Sprite}
   */
  #idleLeftSprite

  /** The sprite to render when player is moving right.
   * @type {Sprite}
   */
  #runRightSprite

  /** The sprite to render when player is moving left.
   * @type {Sprite}
   */
  #runLeftSprite

  /** The current sprite to render.
   * @type {Sprite}
   */
  #currentSprite

  /** The direction the player is facing
   * @type {"right" | "left"}
   */
  #direction = "right"

  /** The absolute value by which velocity is changed when moving left/right,
   * in pixels per tick
   * @type {number}
   */
  #xSpeed = 0.6

  /**
   * @param {number} x - horizontal position, in pixels
   * @param {number} y - vertical position, in pixels
   * @param {number} width - Initial width, in pixels
   * @param {number} height - Initial height, in pixels
   */
  constructor(x, y, width, height) {
    const color = "white"
    super(x, y, width, height, color)

    /** Horizontal velocity, in pixels per tick.
     * Positive values go right, negative values go left.
     * @type {number}
     */
    this.xVelocity = 0

    /** Vertical velocity, in pixels per tick.
     * Positive values go down, negative values go up.
     * @type {number}
     */
    this.yVelocity = 0

    this.#width = width
    this.#height = height

    this.#addSprites()
  }

  /**
   * Update the player's position, based on its velocity.
   * Called once per tick.
   */
  update() {
    // Previous position used for collision detection
    this.prevX = this.x
    this.prevY = this.y
    if (Math.abs(this.xVelocity) &lt; 0.1) this.#idle()

    this.x = Math.round(this.x + this.xVelocity)
    this.y = Math.round(this.y + this.yVelocity)
  }

  /**
   * Increase horizontal velocity in the left direction.
   */
  moveLeft() {
    this.#run("left")
    this.xVelocity -= this.#xSpeed
  }

  /**
   * Increase horizontal velocity in the right direction.
   */
  moveRight() {
    this.#run("right")
    this.xVelocity += this.#xSpeed
  }

  /**
   * Increase player's upward velocity, if not already jumping.
   */
  jump() {
    // Disallow jumping in the air
    if (!this.#isJumping) {
      this.yVelocity -= 20
      this.#isJumping = true
    }
  }

  /**
   * Allow the player to jump again. Called when player hits the ground.
   */
  stopJump() {
    this.#isJumping = false
  }

  /**
   * Get the current sprite set to the correct animation frame.
   * @override
   */
  get imageInfo() {
    const imageInfo = this.#currentSprite.frame()
    imageInfo.dx = this.x
    imageInfo.dy = this.y
    imageInfo.dWidth = this.#width + 1
    imageInfo.dHeight = this.#height
    return imageInfo
  }

  /**
   * Initialize all the sprites for different actions.
   */
  #addSprites() {
    const idleAnimationFactor = 20
    const runAnimationFactor = 5

    const idleRightImage = new Image()
    idleRightImage.src = "./sprites/idle-right.png"
    this.#idleRightSprite = new Sprite({
      image: idleRightImage,
      width: 52,
      height: 12,
      cols: 4,
      speedFactor: idleAnimationFactor,
    })

    const idleLeftImage = new Image()
    idleLeftImage.src = "./sprites/idle-left.png"
    this.#idleLeftSprite = new Sprite({
      image: idleLeftImage,
      width: 52,
      height: 12,
      cols: 4,
      speedFactor: idleAnimationFactor,
    })

    const runRightImage = new Image()
    runRightImage.src = "./sprites/run-right.png"
    this.#runRightSprite = new Sprite({
      image: runRightImage,
      width: 136,
      height: 12,
      cols: 8,
      speedFactor: runAnimationFactor,
    })

    const runLeftImage = new Image()
    runLeftImage.src = "./sprites/run-left.png"
    this.#runLeftSprite = new Sprite({
      image: runLeftImage,
      width: 136,
      height: 12,
      cols: 8,
      speedFactor: runAnimationFactor,
    })
  }

  /**
   * Set the current sprite to either idleLeft or idleRight.
   */
  #idle() {
    this.#currentSprite =
      this.#direction === "right" ? this.#idleRightSprite : this.#idleLeftSprite
    this.#width = this.#height = 12
  }

  /**
   * Set the current sprite to the correct run animation based on direction.
   * @param {"right"|"left"} direction - Direction player is moving
   */
  #run(direction) {
    this.#direction = direction
    this.#width = 16
    this.#height = 12
    this.#currentSprite =
      this.#direction === "right" ? this.#runRightSprite : this.#runLeftSprite
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BrushProjectile.html">BrushProjectile</a></li><li><a href="Controller.html">Controller</a></li><li><a href="Engine.html">Engine</a></li><li><a href="Game.html">Game</a></li><li><a href="GameObject.html">GameObject</a></li><li><a href="GameWorld.html">GameWorld</a></li><li><a href="GoalObject.html">GoalObject</a></li><li><a href="Level.html">Level</a></li><li><a href="Platform.html">Platform</a></li><li><a href="Player.html">Player</a></li><li><a href="Renderer.html">Renderer</a></li><li><a href="Sprite.html">Sprite</a></li><li><a href="Treat.html">Treat</a></li></ul><h3>Global</h3><ul><li><a href="global.html#availableLevels">availableLevels</a></li><li><a href="global.html#controller">controller</a></li><li><a href="global.html#currentLevel">currentLevel</a></li><li><a href="global.html#decrementLevel">decrementLevel</a></li><li><a href="global.html#deleteDataBtn">deleteDataBtn</a></li><li><a href="global.html#deleteSavedData">deleteSavedData</a></li><li><a href="global.html#engine">engine</a></li><li><a href="global.html#game">game</a></li><li><a href="global.html#gameOver">gameOver</a></li><li><a href="global.html#handleInputEvent">handleInputEvent</a></li><li><a href="global.html#handleResize">handleResize</a></li><li><a href="global.html#helpBtn">helpBtn</a></li><li><a href="global.html#helpToggle">helpToggle</a></li><li><a href="global.html#incrementLevel">incrementLevel</a></li><li><a href="global.html#initializeLocalData">initializeLocalData</a></li><li><a href="global.html#nextLevelBtn">nextLevelBtn</a></li><li><a href="global.html#prevLevelBtn">prevLevelBtn</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#renderer">renderer</a></li><li><a href="global.html#restart">restart</a></li><li><a href="global.html#restartBtn">restartBtn</a></li><li><a href="global.html#saveLevelData">saveLevelData</a></li><li><a href="global.html#secondsToTimerString">secondsToTimerString</a></li><li><a href="global.html#setLevel">setLevel</a></li><li><a href="global.html#setupLevelButtons">setupLevelButtons</a></li><li><a href="global.html#showPersonalBest">showPersonalBest</a></li><li><a href="global.html#unlockedLevels">unlockedLevels</a></li><li><a href="global.html#update">update</a></li><li><a href="global.html#updateTimer">updateTimer</a></li><li><a href="global.html#updateTreats">updateTreats</a></li><li><a href="global.html#updateUnlockedLevels">updateUnlockedLevels</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Fri May 13 2022 01:00:07 GMT-0600 (Mountain Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
